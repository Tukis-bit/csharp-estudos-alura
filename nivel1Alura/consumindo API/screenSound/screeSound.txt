using System.Text.Json;
using screenSound.Filtros;
using screenSound.Modelos;

Console.Clear();
using (HttpClient client = new HttpClient())
{
    try
    {
    string resposta = await client.GetStringAsync("https://guilhermeonrails.github.io/api-csharp-songs/songs.json");
   
    var musicas = JsonSerializer.Deserialize<List<Musica>>(resposta)!;
    Console.WriteLine(resposta);
    LinqFilter.FiltrarGenerosMusicais(musicas);
    LinqOrder.OrdernarArtistas(musicas); 
    LinqFilter.FiltrarArtistaPorGenero(musicas, "rock");
    LinqFilter.FiltrarMusicarPorArtista(musicas,"YG ");
    LinqFilter.FiltrarTonalidade(musicas);

    var musicasPreferidasDoDaniel = new MusicasPreferidas("Daniel");
    musicasPreferidasDoDaniel.AdicionarMusicas(musicas[1]);
    musicasPreferidasDoDaniel.AdicionarMusicas(musicas[377]);
    musicasPreferidasDoDaniel.AdicionarMusicas(musicas[4]);
    musicasPreferidasDoDaniel.AdicionarMusicas(musicas[6]);
    musicasPreferidasDoDaniel.AdicionarMusicas(musicas[55]);

    musicasPreferidasDoDaniel.ExibirFavoritas();
    musicasPreferidasDoDaniel.GerarJson();


    }
    catch (Exception ex)
    {
        Console.WriteLine($"Ocorreu um erro: {ex.Message} ");
    }
        
}